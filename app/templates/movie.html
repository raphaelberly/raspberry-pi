<html>

<head>
    {% include 'base/head.html' %}
    <script type=text/javascript src="{{ url_for('static', filename='js/menu.js') }}"></script>
    <script type=text/javascript src="{{ url_for('static', filename='js/referrer.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/menu.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/buttons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/movie.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/slider.css') }}">

    <!--  jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- Isolated Version of Bootstrap, not needed if your site already uses Bootstrap -->
    <link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />
    <!-- Bootstrap Date-Picker Plugin -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>

</head>

<body ontouchstart="">

{% with title = 'Movie' %}
    {% include 'base/menu.html' %}
{% endwith %}
{% include 'base/alert.html' %}

<div class="movies nobar">

<table>

    <tr><td>
        <img src="{{ item.get('image') }}">
    </td></tr>
    <tr><td>
        <b>{{ item.get('title') }}{% if item.get('year') %} ({{ item['year'] }}){% endif %}</b>
        {% if item.get('genres') %}
            <br/>{{ ', '.join(item['genres']) }}
        {% endif %}
        {% if item.get('directors') %}
            <br/>By {{ ' and '.join(item['directors']) }}
        {% endif %}
        {% if item.get('cast') %}
            <br/>With {{ ', '.join(item['cast']) }}
        {% endif %}
        {% if item.get('duration') %}
            <br/>{{ item['duration'] }}
        {% endif %}
    </td></tr>

    {% if mode == 'show_slider' %}
    <tr><td>
        <div class="bootstrap-iso">
         <div class="container-fluid">
          <div class="row">
           <div class="col-md-6 col-sm-6 col-xs-12">

            <!-- Form code begins -->
            <form method="post">
              <div class="form-group"> <!-- Date input -->
                <label class="control-label" for="date">Date</label>
                <input class="form-control" id="date" name="date" placeholder="05/10/2019" type="text"/>
              </div>
              <div class="form-group"> <!-- Submit button -->
                <button class="btn btn-primary " name="submit" type="submit">Submit</button>
              </div>
             </form>
             <!-- Form code ends -->

            </div>
          </div>
         </div>
        </div>
    </td></tr>
    {% endif %}

    {% if mode == 'show_edit_buttons' %}
    <tr><td>
        {% if item.get('grade') %}
        <div class="mentions">
            <img src="/static/images/icon_check.png">
            <b>{{ [item['grade']|int, item['grade']]|max }}/10</b>, added {{ format_date(item['date'])|lower }}
        </div>
        {% endif %}
    </td></tr>
    <tr><td>
        <table class="dual"><tr>
        <td class="left">
            <input class="styled-button full" type="button" onclick="location.href='{{ url_for('movie', movie_id=item['tmdb_id'], show_slider=True, ref=referrer, ref_scroll=scroll, **args) }}';" value="Edit">
        </td>
        <td class="right">
            <form action="{{ url_for('movie', movie_id=item['tmdb_id'], ref=referrer, ref_scroll=scroll, **args) }}" method="post">
                <input class="styled-button empty" type="submit" name="remove" value="Remove" onclick="javascript:if (window.confirm('Remove from journal?')) {return true;} else {return false;}">
            </form>
        </td></tr>
        </table>
    </td></tr>
    {% endif %}

    {% if mode == 'show_add_buttons' %}
    <tr><td>
        {% if not item['movie'] in watchlist %}
        <table class="dual"><tr>
        <td class="left">
            <input class="styled-button full" type="button" onclick="location.href='{{ url_for('movie', movie_id=item['tmdb_id'], show_slider=True, ref=referrer, ref_scroll=scroll, **args) }}';" value="Add">
        </td>
        <td class="right">
            <form action="{{ url_for('movie', movie_id=item['tmdb_id']) }}" method="post">
                <input type="hidden" name="add_to_watchlist" value="{{ item['tmdb_id'] }}">
                <input class="styled-button empty" type="submit" value="Watchlist">
            </form>
        </td>
        </tr></table>
        {% else %}
        <input class="styled-button full" type="button" onclick="location.href='{{ url_for('movie', movie_id=item['tmdb_id'], show_slider=True, ref=referrer, ref_scroll=scroll, **args)}} ';" value="Add">
        {% endif %}
    </td></tr>
    {% endif %}

</table>

</div>

{% if mode == 'show_slider' %}
    <script type = "text/javascript" src="{{ url_for('static', filename='js/grade.js') }}"></script>
    <script>
        $(document).ready(function(){
          var date_input=$('input[name="date"]'); //our date input has the name "date"
          var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
          var options={
            format: 'dd/mm/yyyy',
            container: container,
            todayHighlight: true,
            autoclose: true,
            endDate: '0d',
            orientation: 'bottom auto',
          };
          date_input.datepicker(options);
        })
    </script>
{% endif %}
</body>
</html>
